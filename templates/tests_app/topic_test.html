{% extends 'base.html' %}
{% load static %}

{% block title %}{{ topic.name }} - Test | TestMakon{% endblock %}

{% block content %}
<div class="section-sm bg-light">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card border-0 shadow-lg rounded-4 overflow-hidden mb-5">
                    <div class="card-header bg-white py-4 border-bottom text-center position-relative overflow-hidden">
                        <div class="position-absolute top-0 start-0 w-100 h-100 opacity-10"
                             style="background: {{ subject.color }};"></div>

                        <div class="position-relative z-1">
                            <span class="badge bg-white text-dark shadow-sm border mb-3 rounded-pill px-3">
                                {{ subject.name }}
                            </span>
                            <h2 class="fw-bold mb-2">{{ topic.name }}</h2>
                            <p class="text-muted mb-0">Mavzulashtirilgan maxsus test</p>
                        </div>
                    </div>

                    <div class="card-body p-4 p-md-5">
                        <div class="row g-4 mb-5">
                            <div class="col-sm-4 text-center">
                                <div class="mb-2 text-primary">
                                    <i class="bi bi-question-square-fill fs-1"></i>
                                </div>
                                <h4 class="fw-bold mb-0">{{ questions_count }}</h4>
                                <small class="text-muted">Mavjud savollar</small>
                            </div>
                            <div class="col-sm-4 text-center border-start border-end">
                                <div class="mb-2 text-warning">
                                    <i class="bi bi-clock-fill fs-1"></i>
                                </div>
                                <h4 class="fw-bold mb-0">30 daq</h4>
                                <small class="text-muted">Ajratilgan vaqt</small>
                            </div>
                            <div class="col-sm-4 text-center">
                                <div class="mb-2 text-success">
                                    <i class="bi bi-bar-chart-fill fs-1"></i>
                                </div>
                                <h4 class="fw-bold mb-0">O'rta</h4>
                                <small class="text-muted">Qiyinlik darajasi</small>
                            </div>
                        </div>

                        <div class="bg-light p-4 rounded-3 border mb-4">
                            <h6 class="fw-bold mb-3"><i class="bi bi-info-circle me-2"></i>Test haqida:</h6>
                            <ul class="mb-0 text-muted small ps-3">
                                <li class="mb-2">Ushbu test faqat <strong>{{ topic.name }}</strong> mavzusiga oid savollarni o'z ichiga oladi.</li>
                                <li class="mb-2">Savollar soni cheklangan bo'lishi mumkin.</li>
                                <li>Natijalar umumiy reytingga ta'sir qiladi.</li>
                            </ul>
                        </div>

                        <form method="post" action="{% url 'tests_app:quick_test_start' %}">
                            {% csrf_token %}
                            <input type="hidden" name="subject_id" value="{{ subject.id }}">
                            <input type="hidden" name="topic_id" value="{{ topic.id }}">
                            <input type="hidden" name="question_count" value="15">

                            <div class="d-grid">
                                {% if questions_count > 0 %}
                                    <button type="submit" class="btn btn-primary btn-lg fw-bold shadow-primary py-3">
                                        Testni Boshlash <i class="bi bi-arrow-right ms-2"></i>
                                    </button>
                                {% else %}
                                    <button type="button" class="btn btn-secondary btn-lg fw-bold py-3" disabled>
                                        Savollar mavjud emas
                                    </button>
                                {% endif %}
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}