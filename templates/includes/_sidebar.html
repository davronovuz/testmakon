{% load static %}
{# Unified sidebar - use: {% include 'includes/_sidebar.html' with active='page_name' %} #}

<aside class="tl-sidebar">
    <div class="tl-sidebar-card">
        <div class="tl-sidebar-title">Testlar</div>
        <div class="tl-nav">
            <a href="{% url 'tests_app:tests_list' %}" class="tl-nav-item {% if active == 'tests_list' %}active{% endif %}">
                <div class="tl-nav-icon green"><i class="bi bi-grid-fill"></i></div>
                <span class="tl-nav-label">Barcha testlar</span>
            </a>
            <a href="{% url 'tests_app:question_bank' %}" class="tl-nav-item {% if active == 'question_bank' %}active{% endif %}">
                <div class="tl-nav-icon purple"><i class="bi bi-collection-fill"></i></div>
                <span class="tl-nav-label">Savol banki</span>
            </a>
            <a href="{% url 'tests_app:practice_select' %}" class="tl-nav-item {% if active == 'practice' %}active{% endif %}">
                <div class="tl-nav-icon blue"><i class="bi bi-lightning-charge-fill"></i></div>
                <span class="tl-nav-label">Mashq qilish</span>
            </a>
            <a href="{% url 'tests_app:dtm_simulation' %}" class="tl-nav-item {% if active == 'dtm' %}active{% endif %}">
                <div class="tl-nav-icon dark"><i class="bi bi-mortarboard-fill"></i></div>
                <span class="tl-nav-label">DTM</span>
            </a>
            <a href="{% url 'tests_app:quick_test' %}" class="tl-nav-item {% if active == 'quick_test' %}active{% endif %}">
                <div class="tl-nav-icon amber"><i class="bi bi-stopwatch-fill"></i></div>
                <span class="tl-nav-label">Tezkor test</span>
            </a>
        </div>
    </div>

    <div class="tl-sidebar-card">
        <div class="tl-sidebar-title">AI Yordamchi</div>
        <div class="tl-nav">
            <a href="{% url 'ai_core:ai_mentor' %}" class="tl-nav-item {% if active == 'mentor' %}active{% endif %}">
                <div class="tl-nav-icon purple"><i class="bi bi-robot"></i></div>
                <span class="tl-nav-label">AI Mentor</span>
            </a>
            <a href="{% url 'ai_core:conversations_list' %}" class="tl-nav-item {% if active == 'conversations' %}active{% endif %}">
                <div class="tl-nav-icon blue"><i class="bi bi-chat-dots-fill"></i></div>
                <span class="tl-nav-label">Suhbatlar</span>
            </a>
            <a href="{% url 'ai_core:ai_tutor' %}" class="tl-nav-item {% if active == 'tutor' %}active{% endif %}">
                <div class="tl-nav-icon green"><i class="bi bi-book-half"></i></div>
                <span class="tl-nav-label">AI Repetitor</span>
            </a>
            <a href="{% url 'ai_core:ai_advisor' %}" class="tl-nav-item {% if active == 'advisor' %}active{% endif %}">
                <div class="tl-nav-icon amber"><i class="bi bi-bank2"></i></div>
                <span class="tl-nav-label">OTM Maslahatchi</span>
            </a>
        </div>
    </div>

    <div class="tl-sidebar-card">
        <div class="tl-sidebar-title">Rejalashtirish</div>
        <div class="tl-nav">
            <a href="{% url 'ai_core:study_plan_list' %}" class="tl-nav-item {% if active == 'plans' %}active{% endif %}">
                <div class="tl-nav-icon teal"><i class="bi bi-calendar-check-fill"></i></div>
                <span class="tl-nav-label">O'quv rejalar</span>
            </a>
            <a href="{% url 'ai_core:recommendations_list' %}" class="tl-nav-item {% if active == 'recommendations' %}active{% endif %}">
                <div class="tl-nav-icon amber"><i class="bi bi-lightbulb-fill"></i></div>
                <span class="tl-nav-label">Tavsiyalar</span>
            </a>
            <a href="{% url 'ai_core:weak_topics' %}" class="tl-nav-item {% if active == 'weak_topics' %}active{% endif %}">
                <div class="tl-nav-icon red"><i class="bi bi-exclamation-triangle-fill"></i></div>
                <span class="tl-nav-label">Sust mavzular</span>
            </a>
        </div>
    </div>

    <div class="tl-sidebar-card">
        <div class="tl-sidebar-title">Universitetlar</div>
        <div class="tl-nav">
            <a href="{% url 'universities:universities_list' %}" class="tl-nav-item {% if active == 'universities_list' %}active{% endif %}">
                <div class="tl-nav-icon blue"><i class="bi bi-building"></i></div>
                <span class="tl-nav-label">Oliygohlar</span>
            </a>
            <a href="{% url 'universities:all_directions' %}" class="tl-nav-item {% if active == 'all_directions' %}active{% endif %}">
                <div class="tl-nav-icon purple"><i class="bi bi-signpost-split-fill"></i></div>
                <span class="tl-nav-label">Yo'nalishlar</span>
            </a>
            <a href="{% url 'universities:compare' %}" class="tl-nav-item {% if active == 'compare' %}active{% endif %}">
                <div class="tl-nav-icon amber"><i class="bi bi-arrow-left-right"></i></div>
                <span class="tl-nav-label">Solishtirish</span>
            </a>
        </div>
    </div>

    {% if user.is_authenticated %}
    <div class="tl-sidebar-card">
        <div class="tl-sidebar-title">Mening</div>
        <div class="tl-nav">
            <a href="{% url 'tests_app:my_results' %}" class="tl-nav-item {% if active == 'my_results' %}active{% endif %}">
                <div class="tl-nav-icon green"><i class="bi bi-graph-up"></i></div>
                <span class="tl-nav-label">Natijalarim</span>
            </a>
            <a href="{% url 'tests_app:saved_questions' %}" class="tl-nav-item {% if active == 'saved' %}active{% endif %}">
                <div class="tl-nav-icon amber"><i class="bi bi-bookmark-fill"></i></div>
                <span class="tl-nav-label">Saqlangan</span>
            </a>
            <a href="{% url 'tests_app:wrong_answers' %}" class="tl-nav-item {% if active == 'wrong_answers' %}active{% endif %}">
                <div class="tl-nav-icon red"><i class="bi bi-x-circle-fill"></i></div>
                <span class="tl-nav-label">Xatolarim</span>
            </a>
        </div>
    </div>
    {% endif %}
</aside>
